> 有没有现成的智能信息处理的模型（实际上是做通联目标识别），功能主要为处理网络上的流量数据，拆分成IP与IP之间的关系，子网与子网之间的关系。
> 最好有嵌入式相关内容

## 国内外相关研究现状
> 网络流量处理

网络流量处理的相关研究方向：
1. 流量预测与建模：对网络流量未来走势进行预测，从而辅助网络规划与资源调度。
	1. 流量调度与质量保障（QoS）：结合流量预测结果和实时监控，对网络中的不同业务流进行调度和流量整形，以满足实时性和服务质量要求。
2. 流量分类与特征提取：从流量数据中提取特征，实现对应用类型、异常流量或恶意流量的准确识别。
	1. 异常检测与入侵防御
3. 通联目标识别：查到的资料较少

通联目标识别：对网络流量进行拆分和特征提取，将捕获的流量数据按IP/子网对进行聚类和分析，进而构建出一个基于IP/子网地址之间通信关系的图谱。

1. 2010年：基于流量分析的网络拓扑推测方法【专利】
	1. [pdf](https://patentimages.storage.googleapis.com/5b/c5/fd/2442f965457f8b/CN101917310A.pdf)
	2. 功能概述：**被动监听网络流量**，利用 **hop_count 和 RTT 时间序列分析**，进行 **两层聚类**，最终推测网络拓扑结构
		1. 优势：完全被动测量，无需主动探测，不影响网络实际运行；RTT时间序列较之单次RTT更加准确
	3. 实现方法：
		1. 采用libpcap工具在网络主干链路被动监听TCP流量，分析每个IP主机到测量点的hop_count(路由条数)和RTT时间序列
		2. 将具有相同hop_count的IP归为同一子集中，记作：$C_i$
		3. 在子集内部，根据RTT时间序列的相似性（衡量标准：DTW距离）进行二次聚类，划分为多个相似子集，记作：$S_i$
		4. 最终推测的网络拓扑结构：
			1. 每个$S_i$代表一个子网，子网之间的连接由相邻hop_count的$S_i$的相似性计算得出
2. 2017年：一种基于路由信息和Traceroute信息的路由器别名解析方法【专利】
	1. [pdf](https://patentimages.storage.googleapis.com/1f/c0/64/83d7dbe5b2c384/CN107566279A.pdf)
	2. 功能概述：结合**路由报文**和**Traceroute数据**，通过**IP别名解析**与**IP子网推断**，构建高覆盖率、高准确率的网络拓扑结构。
	3. 实现方法：
		1. 采集**被测量网络**中的**路由报文**与**Traceroute数据**
		2. 从**路由报文**中提取**IP地址**与**IP子网**，推断出IP别名
			1. OSPF 报文中**路由器ID**与**源IP**为别名
			2. OSPF LSU 报文中的**通告路由器IP**与**link data**/ **状态ID**对应IP为别名
		3. **IP子网推断**
			1. **合并与排序**Traceroute数据与路由报文IP地址。
			2. 采用**递归拆分法**进行子网划分：
				1. 以 `/24` 为初始前缀，根据**IP地址覆盖率**调整子网大小。
				2. 按照**IP地址数量**递归拆分子网，直至无法继续划分。 
			3. 对比**推断子网**与**路由报文子网**：
				1. 过大：不记录。
				2. 过小：跳过该IP段子网推断。
				3. 一致：保留该子网。
		4. 基于图分析的IP别名解析
			1. 通过Traceroute路径与IP子网的关系推断IP别名：
				1. 若路径交叉点在**P2P子网**，推断IP别名对。
				2. 若路径起点与终点具有别名关系，推断IP别名对。
			2. **验证别名对**是否符合路由报文信息和**无环准则**。
		5. 聚合IP地址，构建网络拓扑：归并具有**别名关系**的IP地址，形成实际网络节点。
3. 2020年：A Graph Neural Network Approach for Scalable and Dynamic IP Similarity in Enterprise Networks 【ARXIV】
	1. [pdf](https://arxiv.org/pdf/2010.04777)
	2. 见 「智能处理模型」小节

## 智能处理模型
> A Graph Neural Network Approach for Scalable and Dynamic IP Similarity in Enterprise Networks 
> 目标：衡量一组由 IP 地址表示的机器之间的相似性

输入数据：来自Bro/Zeek监控工具的网络日志，由于现实世界的网络中连接速率极高，我们将一定时间间隔（例如 10 分钟）内的连接聚合成一个图数据。
- 图的结构：
	- 节点：每个节点代表一个IP
		- 节点特征：由于通常无法获取终端设备的数据，因此没有节点特征
	- 边：如果两IP之间至少发生了一次连接（使用任意协议），则存在一条边
		- 边的特征：IP之间所有涉及到的通信协议的one-hot encoding，协议对应的所有聚合后的数值特征（`responseBytes`（响应字节数），`requestBytes`（请求字节数），`duration`（连接时长），`bytes`（总字节数），`responsePackets`（响应数据包数），`requestPackets`（请求数据包数），`responseIPBytes`（响应 IP 字节数），`requestIPBytes`（请求 IP 字节数））

模型结构：
- 输入层：由于节点无特征，故本文提出了一种仅基于边特征生成初始节点特征的新输入层
- 中间层（多层）：采用GatedGCN Convolutional Layer（[pdf](https://arxiv.org/pdf/1711.07553) 中的残差门控图卷积模型）
	- 分为编码器+解码器两部分
	- 将$e^0_{ij}$表示为初始输入的边特征，$h_i,h_j$表示经编码器后的节点表示，$e_{ij}^d$表示经解码器输出的边特征
- 损失函数设计（两部分）：
	- 边特征重构损失（auto-encoder的思想）：也即希望$e_{ij}^0和e_{ij}^d$的嵌入向量相似
	- 邻域嵌入匹配损失：也即希望相邻节点($h_i,h_j$)的嵌入向量相似

模型在训练时需要有解码器部分，在实际使用时只需要编码器部分，也即得到IP节点的嵌入表示（$h_i,h_j$），IP之间采用余弦相似度来衡量。
