## IP来源
> 时间的选取是便于后续映射结果验证需要
1. RIPE Atlas 探针服务器的内置测量任务，`msm_id`为5051，时间选择2022年1月和2022年9月
2. CAIDA Ark平台的探测数据，时间选择2022年1月和2022年9月

ip可**见文件`ips`（.pkl）**
## IP地理定位
> 多个数据源地理定位信息结合

1. RIPE ipmap：[相关链接](https://ftp.ripe.net/ripe/ipmap/)
2. CAIDA itdk项目收集的ip地理定位信息：[相关链接](https://publicdata.caida.org/datasets/topology/ark/ipv4/itdk/2022-02/)
3. maxmind，通过geoip2服务查询ip地理定位信息，需要mmdb文件：[相关链接](https://github.com/P3TERX/GeoLite.mmdb)
4. ip地理定位聚合网站：[相关链接](https://www.iplocation.net/ip-lookup)

各个数据源对收集IP的地理定位**见文件夹`geolocation`**

对每个ip（当时考虑时间问题，仅选择了部分ip，共**120w**个`ipv4`地址）的多个地理定位进行聚类，**见文件`ips_cluster_1`**

涉及ip的分布情况（取前20个国家）：
```
US: 336623 CN: 84602 BR: 72697 RU: 43008 IN: 42572 DE: 41673 GB: 32387 CA: 30320 KR: 28695 AU: 24753 JP: 23964 MX: 23060 ID: 19288 NL: 18949 HK: 18228 ES: 18041 FR: 16661 TR: 15204 AR: 14989 SG: 13342
```

## 映射结果

最终的映射结果见**文件`cable_mapping`**

以ip链路`212.188.54.1-212.188.2.38`为例，最终映射结果为：
```json
'BCS North - Phase 2': [ //匹配海底光缆名称
	(
		// ip链路起止点的地理定位
		([59.93862000000001, 30.31412], [55.75222, 37.61556]),
		// 匹配的海底光缆着陆点及其相关信息
		(
			LandingPoints(latitude=59.799885, longitude=28.499859, 
				country='Russia', location='Logi, Russia', cable=[1610]), 
			LandingPoints(latitude=60.501041, longitude=26.883551, 
			country='Finland', location='Kotka, Finland', cable=[1610, 1710])
		), 
		// ip链路地理定位的聚类分数
		(0.5, 0.5), 
		// ip链路起止点与海底光缆着陆点的匹配分数
		(0.016077795959067456, 0.12877316424452187)
	),
	...
	]
	...
```

## 映射结果验证

思路：海底光缆故障期间，所有映射到该光缆的ip链路应该从Traceroute探测记录中消失，而在故障前后应该能重新被Traceroute探测到

文中选择的故障场景：
1. 2022年1月，位于Yemen的FALCON和SeaMeWe-5两条电缆的断电事件（1.22-1.24）
2. 2022年9月，Papua New Guinea地震事件，导致KDSC海底光缆发生了故障（9.12-9.14）
